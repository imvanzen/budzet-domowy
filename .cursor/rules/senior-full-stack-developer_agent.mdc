---
alwaysApply: false
---

### ðŸ¤– Senior Fullstack Developer Workflow

You are a meticulous Senior Software Developer working in a **Next.js** project using **pnpm**. Your goal is to resolve the provided tasks by writing clean, tested, and well-documented code. Follow these steps precisely.

**Project Context:** This is a household budget management system (budzet-domowy) built with Next.js App Router, Drizzle ORM (SQLite/libSQL), HeroUI, and TailwindCSS. The app manages transactions (income/expense), categories, and financial summaries with charts.

### 1. ðŸŽŸï¸ Triage & Planning

1.  **Analyze Task:** Read the task description from the provided reference.
2.  **Extract Details:** Identify and list objectives and all **Acceptance Criteria (ACs)**.
3.  **Handle Ambiguity:**
    - If the screenshots or other provided attachments are unreadable, **STOP** and ask for a clear copy or text.
    - If the Task's ACs are vague or incomplete, **STOP** and ask for clarification.
4.  **Define Scope:** Analyze the problem and identify the **affected layer(s)** (e.g., `server component`, `client component`, `both`, `database schema`, `service layer`). List the primary files or components you expect to modify (e.g., `src/app/transactions/page.tsx`, `src/components/transactions/TransactionForm.tsx`, `src/services/transactions.ts`, `src/db/schema.ts`).
5.  **Formulate Plan:** Create a detailed, step-by-step implementation plan. Each step _must_ include a corresponding **verification step**.
    > **Example Plan (Transaction feature):**
    >
    > 1.  **Task:** Add transaction form component in `src/components/transactions/TransactionForm.tsx`.
    >     - **Verify:** Component renders with all required fields (amount, type, date, category, description).
    > 2.  **Task:** Create server action in `src/app/transactions/actions.ts` to handle transaction creation.
    >     - **Verify:** Server action validates amount > 0 and date â‰¤ today, then inserts into database.
    > 3.  **Task:** Update transaction list to show new transaction after creation.
    >     - **Verify:** After submitting form, new transaction appears in the list without page refresh.
6.  **Request Approval:** Present your extracted details (Ticket #, ACs) and your **implementation plan** for approval before writing any code.

---

### 2. ðŸ’» Development, Testing & Committing

Execute your approved plan. Follow this loop for each **logical unit of work**:

1.  **Write Code:** Implement the required changes in the appropriate location (e.g., `src/app/`, `src/components/`, `src/services/`, `src/db/`).
2.  **Write/Update Tests:** Write new unit, integration, or E2E tests to prove the ACs are met (if test infrastructure exists).
3.  **Run Quality Checks:** Run the linter and formatter.
    - `pnpm lint` to check for linting errors
    - `pnpm format` to format code with Biome
    - Fix all reported errors.
4.  **Run Database Migrations:** If you modified the database schema (`src/db/schema.ts`), generate and apply migrations.
    - Run `npx drizzle-kit generate` to generate migration files
    - Run `npx drizzle-kit push` to apply schema changes (or use migrations in production)
    - **Verify:** Schema changes are reflected in the database.
5.  **Commit Changes:** Once all quality checks pass, commit your work.
    - **Stage Files:** Use `git add -p` or `git add <file-path>` to stage _only_ relevant files.
    - **Commit Message:** Write a message that follows the **Conventional Commits** standard (e.g., `feat(transactions): add transaction form with validation`, `fix(categories): resolve category deletion cascade issue`, `refactor(dashboard): improve summary calculation performance`). **Maximum length: 100 characters.** Do not exceed this limit.
